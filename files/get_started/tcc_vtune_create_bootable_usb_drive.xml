<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<!-- Generated by Sphinx Dita Writer 0.16 -->
<topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" id="step-4-create-a-bootable-usb-drive" xml:lang="en-US" outputclass="no-rel-links" ditaarch:DITAArchVersion="1.2" class="- topic/topic ">
    <title class="- topic/title ">Step 4: Create a Bootable USB Drive</title>
    <body>
        <div id="tcc-vtune-create-bootable-usb-drive"/>
        <div id="step-4-create-a-bootable-usb-drive">
            <p>In this step, you will create a bootable USB drive with the Yocto
            Project*-based image on it. Later, you will use the USB drive to install
            the image on the target system.</p>
            <note>
                <p>The .wic image must be flashed manually to the target system. To prepare the USB drive, you will flash the .wic image to the USB drive. Then you will add a copy of the image to the same drive. This configuration will enable you to boot the target system from the USB drive and use the copied image to flash the destination drive.</p>
            </note>
            <ol>
                <li>
                    <p>On the host system, run <codeph>df</codeph> to see the drives:</p>
                    <codeblock>df -h</codeblock>
                    <p>Example output:</p>
                    <image href="../../_images/df_command.png">
                        <alt></alt>
                    </image>
                </li>
                <li>
                    <p>Insert the USB drive in the host system and wait five seconds.</p>
                </li>
                <li>
                    <p>Run <codeph>df</codeph> again to find out where the USB drive is mounted.</p>
                    <codeblock>df -h</codeblock>
                    <p>Typically the USB drive is mounted on <codeph>/media/</codeph>. Example output with USB
                    drive <codeph>/dev/sdc1</codeph>:</p>
                    <image href="../../_images/df_command_media.png">
                        <alt></alt>
                    </image>
                </li>
                <li>
                    <p>Run the following command to unmount the USB drive.
                    <b>Replace “sd&lt;letter&gt;&lt;number&gt;” with your USB drive.</b>
                    In the example above, the drive would be <codeph>/dev/sdc1</codeph>.</p>
                    <codeblock>sudo umount /dev/sd&lt;letter&gt;&lt;number&gt;</codeblock>
                </li>
                <li>
                    <p>Go to the directory where the image is located, see
                    <xref scope="local" format="dita" href="tcc_vtune_build_image_and_toolchain.xml#tcc-vtune-build-image-and-toolchain" class="- topic/xref ">Step 2: Prepare a Yocto Project*-Based Image (Intel® VTune™ Profiler)</xref>.</p>
                    <codeblock>cd &lt;image_directory&gt;</codeblock>
                </li>
                <li>
                    <p>Download the latest bmaptool release from
                    <xref scope="external" format="https" href="https://github.com/intel/bmap-tools/releases" class="- topic/xref ">https://github.com/intel/bmap-tools/releases</xref>. Bmaptool flashes files to USB, similar to the <codeph>dd</codeph> command.</p>
                    <codeblock>curl -Lo bmaptool https://github.com/01org/bmap-tools/releases/download/v3.4/bmaptool &amp;&amp; chmod +x bmaptool</codeblock>
                </li>
                <li>
                    <p>Ensure that Python* module <codeph>six</codeph> is installed on the system.</p>
                    <codeblock>pip3 install six</codeblock>
                </li>
                <li>
                    <p>Run the following command to generate a bootable USB flash drive.
                    <b>Replace “sd&lt;letter&gt;” with your USB drive.</b>
                    In the example above, the drive would be <codeph>/dev/sdc</codeph>.
                    <b>This command will replace all existing data on the drive.
                    Make sure it’s the correct drive.</b></p>
                    <codeblock>sudo ./bmaptool copy --bmap core-image-sato-sdk-intel-corei7-64-&lt;datetime&gt;.wic.bmap core-image-sato-sdk-intel-corei7-64-&lt;datetime&gt;.wic  /dev/sd&lt;letter&gt;</codeblock>
                </li>
                <li>
                    <p>Add a copy of the image file to the USB drive:</p>
                    <ol>
                        <li>
                            <p>On the host system, compress the image file for faster copying:</p>
                            <codeblock>bzip2 -kf core-image-sato-sdk-intel-corei7-64-&lt;datetime&gt;.wic</codeblock>
                        </li>
                        <li>
                            <p>Find a partition on the USB drive that is big enough for the
                            compressed image file, for example, the partition named <codeph>data</codeph>.
                            One method of viewing partitions is to use <codeph>gparted</codeph>:</p>
                            <codeblock>sudo gparted</codeblock>
                        </li>
                        <li>
                            <p>On the host system, create the mount point:</p>
                            <codeblock>sudo mkdir /mnt/usb</codeblock>
                        </li>
                        <li>
                            <p>Mount the USB drive. <b>Replace “sd&lt;letter&gt;&lt;number&gt;” with the
                            partition you identified in step 9b.</b></p>
                            <codeblock>sudo mount /dev/sd&lt;letter&gt;&lt;number&gt; /mnt/usb</codeblock>
                        </li>
                        <li>
                            <p>Copy the compressed image file:</p>
                            <codeblock>sudo cp &lt;compressed_image_file&gt; /mnt/usb</codeblock>
                        </li>
                        <li>
                            <p>Copy the bmap file:</p>
                            <codeblock>sudo cp core-image-sato-sdk-intel-corei7-64-&lt;datetime&gt;.wic.bmap /mnt/usb</codeblock>
                        </li>
                        <li>
                            <p>After copying the compressed image file, unmount the USB drive:</p>
                            <codeblock>sudo umount /mnt/usb</codeblock>
                        </li>
                    </ol>
                </li>
                <li>
                    <p>Remove the USB drive from the host system.</p>
                </li>
            </ol>
        </div>
    </body>
</topic>
