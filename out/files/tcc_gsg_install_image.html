<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="Step 5: Install the Image" />
<meta name="DC.coverage" content="" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="step-5-install-the-image" />
<meta name="DC.language" content="en-US" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Step 5: Install the Image</title>
</head>
<body class="no-rel-links" id="step-5-install-the-image">

    <h1 class="title topictitle1" id="ariaid-title1">Step 5: Install the Image</h1>

    <div class="body">
        <div class="div" id="step-5-install-the-image__install-image"></div>
        <div class="div" id="step-5-install-the-image__step-5-install-the-image">
            <p class="p">In this step, you will install the Yocto Project*-based image on the
            target system. The following instructions are for Intel customer
            reference boards.</p>

            <ol class="ol">
                <li class="li">
                    <p class="p">Connect the keyboard, monitor, and mouse to the target system.</p>

                </li>

                <li class="li">
                    <p class="p"><strong class="ph b">Important:</strong>
                    If an image is already installed on the target system’s local drive, follow the instructions in <a class="xref" href="#remove-boot-partition">Remove Boot Partition</a>.</p>

                </li>

                <li class="li">
                    <p class="p">Insert the bootable USB drive in the target system.</p>

                </li>

                <li class="li">
                    <p class="p">Power on the target system by pressing the power button and press
                    <strong class="ph b">F2</strong>
                    to enter the BIOS.</p>

                </li>

                <li class="li">
                    <p class="p">Go to <strong class="ph b">Boot Manager Menu</strong>
                    and select the USB drive. The system boots.</p>

                </li>

                <li class="li">
                    <p class="p">Open the terminal.</p>

                </li>

                <li class="li">
                    <p class="p">Check the names and mount points of the drives on your target system:</p>

                    <pre class="pre codeblock"><code>
lsblk                    </code></pre>
                </li>

                <li class="li">
                    <p class="p">Ensure that all partitions of the target’s drive are unmounted.</p>

                </li>

                <li class="li">
                    <p class="p">Go to the USB drive partition where you copied the compressed image
                    file (for example, <code class="ph codeph">/data</code>).</p>

                </li>

                <li class="li">
                    <p class="p">Flash the image to the target’s local drive. Replace
                    <code class="ph codeph">&lt;target_drive&gt;</code> as appropriate, for example, <code class="ph codeph">mmcblk0</code>.</p>

                    <pre class="pre codeblock"><code>
bmaptool copy --bmap core-image-sato-sdk-intel-corei7-64-&lt;datetime&gt;.wic.bmap &lt;compressed_image_file&gt;.bz2  /dev/&lt;target_drive&gt;                    </code></pre>
                    <div class="note note"><span class="notetitle">Note:</span> 
                        <p class="p">It is not necessary to uncompress the image.</p>

                    </div>

                </li>

                <li class="li">
                    <p class="p">Reboot from the target’s local drive.</p>

                </li>

                <li class="li">
                    <p class="p">Remove the USB drive.</p>

                </li>

            </ol>

            <div class="div" id="step-5-install-the-image__remove-boot-partition"></div>
            <div class="div" id="step-5-install-the-image__remove-boot-partition">
                <p class="p"><strong class="ph b">Remove Boot Partition</strong></p>

                <p class="p">Once an image is installed on the local drive, the target
                system will boot from that drive even when you specify boot from USB.
                This is a known issue.</p>

                <p class="p">In this case, before installing another image on
                the target’s drive, you must remove the boot partition of that drive as
                follows:</p>

                <ol class="ol">
                    <li class="li">
                        <p class="p">Boot the target system from the local drive.</p>

                    </li>

                    <li class="li">
                        <p class="p">Run <code class="ph codeph">lsblk</code> to find the name of the local drive. For example, <code class="ph codeph">mmcblk0</code>.</p>

                        <pre class="pre codeblock"><code>
lsblk                        </code></pre>
                    </li>

                    <li class="li">
                        <p class="p">Run the following command to remove the boot partition from the
                        drive. Replace <code class="ph codeph">&lt;target_drive&gt;</code> as appropriate, for example,
                        <code class="ph codeph">mmcblk0</code>.</p>

                        <pre class="pre codeblock"><code>
dd if=/dev/zero of=/dev/&lt;target_drive&gt; bs=512 count=1                        </code></pre>
                    </li>

                    <li class="li">
                        <p class="p">Reboot the target system.</p>

                        <pre class="pre codeblock"><code>
reboot                        </code></pre>
                    </li>

                </ol>

                <p class="p">After completing these steps, the target system will no longer find the boot partition on the local drive and will boot from USB.</p>

            </div>
        </div>
    </div>

</body>
</html>